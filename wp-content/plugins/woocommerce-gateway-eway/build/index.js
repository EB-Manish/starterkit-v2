!function(){"use strict";var e=window.wp.element,t=window.wp.i18n,n=window.wc.wcBlocksRegistry,o=window.wp.htmlEntities,s=window.wc.wcSettings;const r=()=>{const e=(0,s.getSetting)("eway_data",null);if(!e||"object"!=typeof e)throw new Error("Eway initialization data is not available");return e},a=t=>{var n;let{eventRegistration:o,emitResponse:s,selectedCard:a}=t;const{onCheckoutAfterProcessingWithError:i,onPaymentProcessing:l}=o,d=(null===(n=r())||void 0===n?void 0:n.showSavedCards)||!1;return(0,e.useEffect)((()=>{const e=l((()=>{var e;const t=d?{_eway_nonce:null===(e=r())||void 0===e?void 0:e.nonce,eway_card_id:a}:{};return{type:s.responseTypes.SUCCESS,meta:{paymentMethodData:t}}}));return()=>{e()}}),[l,s.responseTypes.SUCCESS,a,d]),(0,e.useEffect)((()=>{const e=i((e=>{var t;const{processingResponse:n}=e;return{type:s.responseTypes.ERROR,message:null==n||null===(t=n.paymentDetails)||void 0===t?void 0:t.message,messageContext:s.noticeContexts.PAYMENTS,retry:!0}}));return()=>{e()}}),[i,s.responseTypes.ERROR,s.noticeContexts.PAYMENTS]),null};var i,l,d,c=t=>{let{emitResponse:n,eventRegistration:s}=t;const{description:i=""}=r();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a,{emitResponse:n,eventRegistration:s,selectedCard:"new"}),(0,o.decodeEntities)(i))};const m=t=>{let{RenderedComponent:n,...o}=t;return(0,e.createElement)(n,o)};(0,n.registerPaymentMethod)({name:"eway",label:(0,e.createElement)((n=>{const{PaymentMethodLabel:o}=n.components,s=r().title?r().title:(0,t.__)("Credit Card","wc-eway");return(0,e.createElement)(o,{text:s})}),null),ariaLabel:(0,t.__)("Eway payment method","wc-eway"),canMakePayment:()=>!0,content:(0,e.createElement)(m,{RenderedComponent:c}),edit:(0,e.createElement)(m,{RenderedComponent:c}),savedTokenComponent:(0,e.createElement)(m,{RenderedComponent:t=>{let{eventRegistration:n,emitResponse:o,token:s}=t;return(0,e.createElement)(a,{emitResponse:o,eventRegistration:n,selectedCard:s})}}),supports:{features:null!==(i=null===(l=r())||void 0===l?void 0:l.supports)&&void 0!==i?i:[],showSavedCards:null!==(d=r().showSavedCards)&&void 0!==d&&d}})}();